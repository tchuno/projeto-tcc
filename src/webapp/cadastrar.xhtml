<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:f="http://xmlns.jcp.org/jsf/core"
      xmlns:p="http://primefaces.org/ui"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
      xmlns:b="http://bootsfaces.net/ui"
      xmlns:gnfe="http://java.sun.com/jsf/composite/gnfe">
<h:head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
    <title>#{utilBean.customizacao['TITULO']}</title>
    <link href="#{request.contextPath}/resources/images/favicon-gnfe.png" rel="shortcut icon"/>
    <link href="#{request.contextPath}/resources/css/bootstrap.min.css" rel="stylesheet"/>
    <link href="#{request.contextPath}/resources/css/font-awesome.min.css" rel="stylesheet"/>
    <link href="#{request.contextPath}/resources/css/animate.css" rel="stylesheet"/>
    <link href="#{request.contextPath}/resources/css/main.css" rel="stylesheet"/>
    <script src="#{request.contextPath}/resources/js/jquery.js" type="text/javascript"></script>
    <script src="#{request.contextPath}/resources/js/bootstrap.min.js" type="text/javascript"></script>
    <script src="#{request.contextPath}/resources/js/jquery.mask.min.js" type="text/javascript"></script>
    <script src="#{request.contextPath}/resources/js/main.js" type="text/javascript"></script>
    <ui:insert name="head"/>
    <gnfe:customizacao/>
</h:head>
<h:body>
    <f:metadata>
        <f:viewParam name="id" value="#{usuarioEditBean.id}"/>
        <f:event type="preRenderView" listener="#{usuarioEditBean.init}" />
    </f:metadata>
    <p:ajaxStatus onstart="$('#ajaxLoaderImg').show()" onsuccess="$('#ajaxLoaderImg').hide()"/>
    <div id='ajaxLoaderImg' style="position: absolute; right: 0; bottom: 80px; display: none; z-index: 9999;">
        <img src="#{request.contextPath}/resources/images/loader.gif"/>
    </div>
    <div id="wrapper">
        <div id="header">
            <header class="navbar navbar-inverse navbar-fixed-top wet-asphalt" role="banner">
                <div class="container">
                    <div class="navbar-header">
                        <a href="#{request.contextPath}/" class="link-logo">
                            #{utilBean.customizacao['TITULO']}
                        </a>
                    </div>
                </div>
            </header>
            <section id="title" class="emerald">
                <div class="container">
                    <div class="row">
                        <div class="col-sm-12">
                            <h1><h:outputText value="#{msg['cadastrar.label']}"/></h1>
                        </div>
                    </div>
                </div>
            </section>
        </div>

        <h:panelGroup id="content-pg-id">
            <div id="content">
                <section class="container">
                    <b:messages globalOnly="true" showSummary="true" id="mensagensGlobais"/>
                    <script type="text/javascript">
                        jQuery(function($) {
                            hideMessage(4000);
                            var mensagensGlobais = $('#mensagensGlobais');
                            if(mensagensGlobais.html()) {
                                $('html,body').animate({
                                    scrollTop: mensagensGlobais.offset().top - 80
                                }, 500);
                            }
                        });
                    </script>
                    <h:form id="form-usuario">
                        <section id="usuario-page" class="container">
                            <div class="row">
                                <h4 class="tituloForm"><h:outputText value="#{msg['usuarioForm.label']}"/></h4>
                                <div class="col-sm-2"></div>
                                <div class="col-sm-10">
                                    <div class="row">
                                        <div class="col-sm-8">
                                            <div class="row">
                                                <div class="col-md-12">
                                                    <div class="form-group">
                                                        <b:inputText value="#{usuarioEditBean.usuario.cpfCnpj}"
                                                                     label="#{msg['cpfCnpj.label']}" renderLabel="true" disabled="#{usuarioEditBean.id ne null}"
                                                                     styleClass="mask-cpf-cnpj" required="true" />
                                                        <b:message/>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="row">
                                                <div class="col-md-12">
                                                    <div class="form-group">
                                                        <b:inputText value="#{usuarioEditBean.usuario.nome}"
                                                                     label="#{msg['nome.label']}" renderLabel="true"
                                                                     required="true"
                                                                     maxlength="40"/>
                                                        <b:message/>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="row">
                                                <div class="col-md-12">
                                                    <div class="form-group">
                                                        <b:inputText id="emailId" value="#{usuarioEditBean.usuario.email}"
                                                                     label="#{msg['email.label']}" renderLabel="true"
                                                                     maxlength="100" required="true"
                                                                     validatorMessage="#{msg['emailInvalido.error']}" >
                                                            <f:validateRegex pattern="^[_A-Za-z0-9-\+]+(\.[_A-Za-z0-9-]+)*@[A-Za-z0-9-]+(\.[A-Za-z0-9]+)*(\.[A-Za-z]{2,})$" />
                                                        </b:inputText>
                                                        <b:message/>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="row">
                                                <div class="col-md-12">
                                                    <div class="form-group">
                                                        <b:inputText value="#{usuarioEditBean.usuario.telefone}"
                                                                     label="#{msg['telefone.label']}" renderLabel="true"
                                                                     maxlength="15" required="true"
                                                                     styleClass="mask-phone" />
                                                        <b:message/>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="row">
                                                <div class="col-md-12">
                                                    <div class="form-group">
                                                        <b:inputText value="#{usuarioEditBean.usuario.cep}"
                                                                     label="#{msg['cep.label']}" renderLabel="true"
                                                                     maxlength="15" id="cep" required="true"
                                                                     styleClass="mask-cep" />
                                                        <b:message/>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="row">
                                                <div class="col-md-12">
                                                    <div class="form-group">
                                                        <b:inputText value="#{usuarioEditBean.usuario.endereco}" id="rua"
                                                                     label="#{msg['endereco.label']}" renderLabel="true" required="true" />
                                                        <b:message/>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="row">
                                                <div class="col-md-12">
                                                    <div class="form-group">
                                                        <b:inputText value="#{usuarioEditBean.usuario.numero}" required="true"
                                                                     label="#{msg['numero.label']}" renderLabel="true" styleClass="mask-number"/>
                                                        <b:message/>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="row">
                                                <div class="col-md-12">
                                                    <div class="form-group">
                                                        <b:inputText value="#{usuarioEditBean.usuario.bairro}" id="bairro"
                                                                     label="#{msg['bairro.label']}" renderLabel="true" required="true" />
                                                        <b:message/>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="row">
                                                <div class="col-md-12">
                                                    <div class="form-group">
                                                        <b:inputText value="#{usuarioEditBean.usuario.cidade}" id="cidade"
                                                                     label="#{msg['cidade.label']}" renderLabel="true" required="true" />
                                                        <b:message/>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="row">
                                                <div class="col-md-6">
                                                    <div class="form-group">
                                                        <b:inputText value="#{usuarioEditBean.usuario.codIbge}" id="ibge"
                                                                     label="#{msg['codIbge.label']}" renderLabel="true" required="true"/>
                                                        <b:message/>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="row">
                                                <div class="col-md-12">
                                                    <div class="form-group">
                                                        <b:inputText value="#{usuarioEditBean.usuario.estado}" id="estado"
                                                                     label="#{msg['estado.label']}" renderLabel="true" required="true" />
                                                        <b:message/>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="form-group">
                                                <b:commandButton value="#{msg['cadastrar.label']}" styleClass="btn btn-primary btn-lg" actionListener="#{usuarioEditBean.cadastrar()}" ajax="true" update="content-pg-id"/>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </section>
                    </h:form>
                    <script type="text/javascript">
                        jQuery(function($) {
                            carregarCep();
                            configurarMascaras();
                        });
                    </script>
                </section>
            </div>
        </h:panelGroup>
    </div>
</h:body>
</html>
